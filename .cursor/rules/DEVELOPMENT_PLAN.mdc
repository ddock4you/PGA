---
alwaysApply: false
---

## 안내

- 이 문서는 개발 계획/히스토리를 담는 문서다.
- 현재 아키텍처/구현 규칙은 `AGENT_BASE.mdc`, `COMPONENT_ARCHITECTURE.mdc`, `STATE_MANAGEMENT.mdc`를 우선한다.

### 2. 기술 스택 정리 (구현 관점)

- **버전 정책**

  - 새로운 라이브러리나 도구를 도입할 때는 **가능한 최신 안정(Stable) 버전**을 기준으로 설치한다.
  - 주요 의존성(Next.js, React, Tailwind, shadcn/ui, Vitest 등)은 일반적으로 최신 버전을 유지하되,
    브레이킹 체인지가 큰 메이저 업데이트가 있을 경우에는 변경 사항을 검토한 뒤 반영 시점을 결정한다.

- **프론트엔드**

  - **Next.js 16 App Router + React 19 + TypeScript**
  - 스타일: **Tailwind CSS**
  - UI 컴포넌트: **shadcn/ui**
    - 공통 레이아웃, 헤더/내비게이션, 카드, 모달, 탭, 셀렉트, 버튼 등
  - 상태/데이터:
    - 서버 컴포넌트 기반 fetch + 공유 서버 캐시(예: React.cache) + 필요 시 로컬 UI 상태

- **백엔드**
  - 별도 서버 없음, **PokéAPI v2** 직접 호출
  - 주요 엔드포인트 (요약):
    - 세대: `/api/v2/generation/{id or name}`
    - 게임 버전/버전 그룹: `/api/v2/version/{id or name}`, `/api/v2/version-group/{id or name}`
    - 포켓몬: `/api/v2/pokemon/{id or name}`
    - 포켓몬 종: `/api/v2/pokemon-species/{id or name}`
    - 타입: `/api/v2/type/{id or name}`
    - 기술: `/api/v2/move/{id or name}`
    - 머신/습득 방식: `/api/v2/machine/{id}`, `/api/v2/move-learn-method/{id or name}`
    - 아이템: `/api/v2/item/{id or name}`
    - 진화 체인: `/api/v2/evolution-chain/{id}`
    - 서식지/출현: `/api/v2/pokemon-habitat/{id or name}`, `/api/v2/pokemon/{id or name}/encounters`
    - 성격/특성/개체값 힌트: `/api/v2/nature/{id or name}`, `/api/v2/ability/{id or name}`, `/api/v2/characteristic/{id}`

---

### 3. 단계별 범위

#### 3.1 1단계 – MVP 최소 기능

**목표:** 빠르게 동작하는 기본 앱 + 타입 상성 학습용 최소 기능 구축

- **3.1.1 프로젝트 셋업**

  - Next.js 16 App Router + React 19 템플릿 생성
  - Tailwind CSS 설정
  - shadcn/ui 초기 세팅 (레이아웃, 버튼, 카드, 탭 등 기본 컴포넌트)
  - 라우팅 구조:
    - `/` – 검색 랜딩 페이지 (로고 + **게임/세대 선택 버튼** + 통합 검색창)
    - `/search` – 검색 결과 페이지 (포켓몬/기술/특성/도구 섹션별 리스트)
    - `/dex` – 포켓몬 도감 (기본 리스트 + 최소 상세)
    - `/training` – 배틀 트레이닝 (타입 상성 퀴즈)

- **3.1.2 데이터 레이어 기초**

  - PokéAPI/CSV 요청은 기본적으로 서버 컴포넌트(fetchFromPokeApi, loadDexCsvData)에서 수행하며, 상세 페이지는 서버가 내려준 props/context를 우선 소비합니다.

  - (레거시/선택) React Query 설정 (프로젝트에 남아있는 경우에만 유지)
  - PokéAPI 호출용 공통 유틸 (예: `fetchPokemon`, `fetchTypes`, `fetchGeneration`) (완료)
    - `src/lib/pokeapi.ts`에 공통 fetch 래퍼 구현
    - `src/features/pokemonTypes/generation/pokemon` 하위에 기능별 `api/` 모듈로 분리
  - **검색용 인덱스(세대별 + 언어별) 기초 설계**
    - 1단계에서는 **포켓몬 이름 인덱스만** 우선 구현
      - 세대 선택 시 해당 세대의 `pokemon-species` 목록을 이용해 간단한 이름/ID 인덱스 생성
      - 영문 이름 기준 부분 문자열 매칭(예: "pika" → pikachu)으로 검색
    - 2단계에서 기술/특성/도구 및 한국어/일본어 이름 필드를 포함하도록 확장
  - **핵심 유틸/검색/매핑 단위 테스트**
    - `typeEffectiveness`, `searchIndex`, `versionApi` 관련 Vitest 파일로 주요 로직의 회귀를 확보
    - `pnpm test`로 현재 1단계 내 핵심 인덱스/매핑/상성 로직이 통과하는지 확인
  - **게임 ↔ 세대 매핑 로직**
    - PokéAPI의 `version`, `version-group`, `generation` 정보를 사용해 **각 게임 버전이 어느 세대에 속하는지** 매핑 테이블 구성 (기본 구현 완료)
    - 현재는 버전 전체를 순회해 `버전 → (세대, 버전 그룹)` 매핑 테이블을 만들고, 이후 Preferences의 `selectedGameId`와 연결할 계획
    - 최소한 타입/세대/포켓몬 리스트 쿼리 캐시 영속화
  - 사용자 설정 데이터 관리
    - 현재 게임/세대 선택 등 **사용자 환경 설정(Preference)**은 `localStorage`에 JSON 형태로 저장/로드
    - 앱 초기 로딩 시 `localStorage`에서 설정을 불러와 전역 상태(게임/세대 컨텍스트 등)에 반영
    - 설정 스키마 변경을 고려해, 저장 시 버전 키 또는 기본값 초기화 로직을 함께 설계

- **3.1.3 포켓몬 도감 – 최소 기능**

  - `/dex` 페이지 UI (shadcn 카드/탭 활용)
  - 1세대 기준 포켓몬 리스트:
    - 세대 선택(1세대 고정 또는 간단 드롭다운)
    - 이름, 이미지, 타입 아이콘 정도만 표시
  - 포켓몬 상세(간단 버전):
    - 이름, 타입(1~2개), 기본 능력치(종족값 숫자만)
    - 타입 상성 요약(공격/방어 기준 2배/0.5배/0배 간단 표 형태)

- **3.1.8 테마 시스템 구현**

  - shadcn neutral 테마 기반 라이트/다크 모드 지원
  - 헤더에 다크 모드 토글 버튼 배치
  - 테마 설정을 localStorage에 저장하여 재방문 시 자동 적용
  - 컨텐츠별 구분을 위한 무채색 디자인 시스템 적용:
    - 포켓몬: 부드러운 라벤더톤 배경
    - 기술: 따뜻한 코랄톤 배경
    - 특성: 상큼한 라임톤 배경
    - 도구: 차분한 바이올렛톤 배경

- **3.1.4 배틀 트레이닝 – 타입 상성 기본 퀴즈**

  - `/training` 기본 화면 UI (shadcn 카드 + 버튼)
  - 퀴즈 로직:
    - 랜덤 타입 2개 선택 (공격 타입, 방어 타입)
    - “불 타입 공격은 풀 타입에게?” 같은 문제 생성
    - 보기: 2배 / 1배 / 0.5배 / 0배 중 4지선다
  - 정답 체크 및 피드백:
    - 정답/오답 표시, 간단한 해설 텍스트
    - 점수/진행도(예: 10문제 중 n문제) 표시

- **3.1.5 검색 랜딩/결과 – 최소 기능**

  - `/` 검색 페이지:
    - 상단 중앙 로고, 바로 아래 한 행에 **게임/세대 선택 셀렉트 + 검색창** 배치
    - 유저는 “현재 플레이 중인 게임”을 먼저 선택하고, 내부적으로 해당 게임이 속한 세대를 결정
    - 게임/세대를 선택하면, 해당 범위에 대한 검색용 이름 목록을 로딩
    - 세대를 몰라도 검색은 동작하되, 게임/세대를 선택하면 **결과를 해당 환경 중심으로 보여주는 필터**로 동작
  - `/search` 결과 페이지:
    - 검색어, 선택된 게임/세대, 검색 대상 요약(포켓몬/기술/특성/도구)
    - 카테고리별 섹션:
      - 포켓몬: 이름/타입/이미지 최소 정보 리스트 + **처음 등장 세대/대표 게임 배지**
      - 기술/특성/도구: 이름 + 간단 정보(타입/분류 등) 리스트
    - 각 결과 클릭 시 도감 또는 추후 상세 페이지로 이동
  - 세대 셀렉트 옆에 “세대란?” 툴팁/도움말 링크를 두고, **세대별 해당 게임 목록**을 간단 표로 안내

- **3.1.7 게임 선택 UX (1단계)**
  - 헤더 또는 초기 진입 시 간단 UI로 **현재 플레이 중인 게임(스칼렛/바이올렛, 소드/실드 등)**을 선택할 수 있게 함
  - 선택한 게임/세대는 `localStorage`에 저장하여 재방문 시 자동 적용
  - 세대 셀렉트 항목은 `1세대 (레드/그린/블루/옐로우)`, `8세대 (소드/실드)`처럼 **세대 + 대표 게임 이름**을 함께 표기
  - “지금 하는 게임이 몇 세대인지 모를 때”를 위한 간단 가이드:
    - 콘솔 종류와 게임 표지/아이콘으로 세대를 유추할 수 있는 짧은 설명 또는 링크 제공

#### 3.2 2단계 – 도감/퀴즈/다국어/검색 확장

**목표:** 포켓몬 상세 정보 확장, 포켓몬 기반 퀴즈 추가, 다국어 및 검색/UX 개선

- **3.2.1 포켓몬 도감 – 상세 정보 확장**

  - 포켓몬 상세 정보 화면을 다음 항목들까지 확장 구현한다.
  - **기본 섹션**
    - 레이더 차트(종족값 시각화): HP/공격/방어/특공/특방/스피드 6개 스탯을 레이더(또는 막대) 차트로 표현
    - 타입 상성 상세: 복합타입 기준 최종 상성(2배/0.5배/0배)을 공격/방어 관점에서 표/그리드로 표시
  - **진화/설명 섹션**
    - 진화 체인: `evolution-chain` 데이터를 트리/타임라인 형태로 표시 (진화 조건 요약 포함)
    - 도감 버전별 설명 텍스트: 언어/버전(또는 버전 그룹)을 선택해 해당 텍스트를 리스트/탭으로 표시
  - **환경/서식 정보 섹션**
    - 서식지(Habitat): 기본 서식지 카테고리 표시
    - 필요 시 출현 장소(Encounters) 요약: 주요 등장 지역/레벨대/등장 방식 간단 요약
  - **특성/성격/개체값 힌트 섹션**
    - 특성 목록: 일반 특성/숨겨진 특성 구분, 각 특성 이름/간단 설명 표시
    - 특성 상세 모달: 특성 클릭 시 `ability` 상세(효과 텍스트, 해당 포켓몬들 목록 등) 표시
    - 성격(Nature) 관련 정보: 어떤 성격이 어떤 스탯을 올리고 내리는지 표 또는 설명으로 제공 (포켓몬 자체에 직접 귀속되진 않지만 빌드 이해용)
    - 특성/성향 기반 세부 개체값 힌트(Characteristic): 예시 수준으로 “이런 문구면 어떤 스탯 개체값이 높다” 정도의 설명 제공
  - **기술 섹션**
    - 레벨업으로 익히는 기술: 레벨/버전 그룹 기준으로 테이블 표시
    - 기술머신/비전머신(TMs/HMs)으로 익히는 기술: 관련 아이템(TMX 번호 등)과 함께 리스트업
    - 교배(알)로 유전되는 기술: 부모 포켓몬을 고려한 알 기술 목록 표시
    - 튜터(NPC)로 배울 수 있는 기술: 해당 버전/지역에서의 튜터 기술 목록
    - **한글화**: 모든 기술명, 타입, 분류, 포켓몬 이름 한국어 표시 (move_names.csv, pokemon_species_names.csv 활용)
  - **기타 정보 섹션**
    - 성비, 알 그룹, 부화 조건(걸음 수/시간), 초기 친밀도
    - 성장 타입/경험치 곡선 및 레벨별 필요 경험치 곡선
    - 야생일 때 지닌 도구(버전별/확률 포함)
    - EV(기초포인트) 제공량, 포획도
    - 포케슬론 관련 정보는 PokéAPI 한계에 따라 **선택적/추가 연구 항목**으로 남겨둔다.
  - 세대/게임 선택에 따른 정보 필터링/비표시 처리 로직 정리

- **3.2.2 포켓몬 도감 (`/dex`) 콘텐츠 확장 및 UX 개선**

  - **탭 구조 도입**: 포켓몬 리스트 외에 기술/특성/도구 탭을 추가하여 콘텐츠 분리
    - **포켓몬 탭**: ID 기준 오름차순 정렬로 빈 번호 이슈 해결
    - **기술 탭**: 게임/세대 필터 적용, 기술 상세 페이지(`/moves/:id`) 연동
    - **특성/도구 탭**: 리스트 및 상세 페이지(`/abilities/:id`, `/items/:id`) 연동
  - **상세 페이지 (`/dex/:id`) 고도화**:
    - 전용 헤더(게임/세대 선택, 상성 뱃지 포함)
    - 공격 상성 컴포넌트(공격 시 유리한 타입) 추가
    - 종족값 그래프 개선(100 이상 구간 축소 비율 적용, 기준선 강조) 및 수치 테이블 추가
    - 진화 조건 상세 텍스트 구체화

- **3.2.3 배틀 트레이닝 – 포켓몬 기반 퀴즈 및 난이도 확장**

  - 포켓몬 기반 퀴즈 추가:
    - 랜덤 포켓몬 1마리 제시(이름/이미지/타입)
    - “이 포켓몬에게 효과적인 공격 타입은?” 형태 문제
    - 복합타입 상성 계산 유틸을 활용해 정답 판정
  - 퀴즈 모드/난이도 옵션:
    - 문제 수, 허용 타입 수, 세대/타입 범위 제한 등

- **3.2.4 데이터/캐싱 고도화**
  - 어떤 데이터(타입, 세대, 포켓몬 리스트 등)를 **초기 프리페치**할지 정교화
  - 세대별 검색 인덱스(포켓몬/기술/특성/도구 이름 목록)를 **선택된 세대 기준으로 점진적 로딩**하도록 최적화
  - **검색 UX 고도화**:
    - 통합 검색 탭(전체 요약 뷰) 추가
    - 결과 내 상세 필터(타입, 위력 등) 추가
    - 검색어 하이라이팅 기능 구현
  - 필요 시 idb → Dexie로 마이그레이션 검토 (파티/즐겨찾기 등 유저 데이터 구조까지 고려)

---

### 4. 작업 단위(에픽/태스크) 예시

1. **프로젝트 셋업 에픽**

   - Next.js 16 App Router + React 19 초기화
   - Tailwind, shadcn/ui 셋업
   - 라우팅 및 기본 레이아웃 구축

2. **데이터 레이어 에픽**

   - 서버 fetch/caching 구성 (필요 시 일부 클라이언트 캐시 병행)
   - PokéAPI 클라이언트 유틸 함수 작성
   - 타입 상성/세대/1세대 포켓몬 리스트 쿼리 구현

3. **도감 MVP 에픽**

   - `/dex` 리스트 UI 구현
   - 간단 포켓몬 상세 모달/페이지 구현

4. **검색 에픽 (1단계)**

   - `/` 검색 랜딩 페이지 UI 구현 (로고 + 게임/세대 셀렉트 + 검색창)
   - 게임 선택 UI 및 **게임 → 세대 매핑 로직** 구현
   - 세대(또는 게임) 선택 시 검색용 이름 목록 로딩 및 캐싱
   - `/search` 결과 페이지 UI 및 카테고리별 리스트 렌더링

5. **타입 상성 퀴즈 에픽**

   - 타입 상성 유틸 함수 구현
   - `/training` 타입 상성 퀴즈 화면/로직

6. **도감 확장 에픽 (2단계)**

   - 포켓몬 상세 정보 항목별 구현 (진화 체인, 기술, 기타 정보 등)

7. **배틀 트레이닝 개편 에픽 (최근 개선 완료)**

   - Context API 기반 상태 관리 시스템 구현 ✅
   - **공격 상성 맞추기** 기능 구현 ✅
     - Lv.1: 유저 포켓몬 타입 제시 → 효과적인 공격 타입 맞추기 ✅
     - Lv.2: 포켓몬 제시 (타입 숨김) → 효과적인 공격 타입 맞추기 ✅
     - Lv.3: 포켓몬 제시 → 다양한 효과의 기술 중 가장 효과적인 것 맞추기 ✅
   - **포켓몬 속성 맞추기** 기능 구현 ✅
     - 단일 타입 포켓몬: 4개 선택지 중 정답 타입 1개 선택 ✅
     - 듀얼 타입 포켓몬: 4개 선택지 중 정답 타입 2개 모두 선택 ✅
   - **화면 구성** 구현 ✅
    - 시작 화면: 모드 선택 (공격/속성) + 난이도 선택 (속성은 난이도 없음) ✅
     - 인게임 화면: 문제 표시 + 보기 선택 ✅
     - 종료 화면: 정답률 표시 + 다시 하기 기능 ✅
   - **옵션 시스템** 구현 ✅
     - Lv.1: 문제 수(5/10/15), 듀얼 타입 허용 ✅
     - Lv.2: 세대 선택 (단일/범위), 하위 세대 포함 옵션 ✅
     - Lv.3: 세대 선택 (단일/범위), 하위 세대 포함 옵션 ✅
     - 포켓몬 속성: 문제 수 + 세대 범위 선택 ✅
   - **UI/UX 개선** ✅
     - Lv.1: 보기와 정답을 한국어 타입명으로 표시 ✅
     - Lv.2, Lv.3: 기술명 + 타입 배지 표시, 정답 표시 시 포켓몬 타입 정보 표시 ✅
     - 포켓몬 속성: 4개 선택지 버튼, 듀얼 타입 선택 상태 표시 ✅
     - 모바일 반응형 지원 (한 행씩 표시) ✅
   - 퀴즈 진행 버그 수정 (useEffect 조건 문제 해결) ✅
   - 기술 데이터 로딩 및 한국어 표시 구현 ✅
   - **배틀 트레이닝 심화 개편 (API 의존성 제거)** ✅
     - CSV 기반 퀴즈 데이터 로딩 시스템 구현 (PokéAPI 의존도 최대한 낮춤) ✅
     - 퀴즈 데이터 인터페이스 정의 (QuizPokemon, QuizMove) ✅
     - 타입 상성 계산 고도화 (0.25배, 4배 배율 추가, UI 피드백 메시지) ✅
     - 퀴즈 알고리즘 정교화 (정답 유일성 보장, 오답은 정답보다 낮은 배율로 구성) ✅
     - Lv.3 난이도 완전 구현 (기술 타입 숨김, 최적 기술 선택) ✅
     - 퀴즈 시작 무한 로딩 버그 수정 (useEffect 디펜던시 사이클 해결) ✅
   - **포켓몬 속성 맞추기 추가** ✅
     - 새로운 퀴즈 모드 "type" 추가 ✅
     - 문제 생성 로직 구현 (4개 선택지: 정답 + 오답) ✅
     - UI 컴포넌트 구현 (다중 선택 지원) ✅
     - 결과 화면 모드별 표시 수정 ✅

8. **검색 고도화 에픽 (2단계)**

   - 검색 로직 개선(부분 일치/간단 fuzzy 검색)
   - 세대 필터 조합 최적화, 성능 튜닝

9. **UX 고도화 에픽 (2단계)**

- 성능/UX 튜닝, 모바일 대응

#### 3.3 3단계 – 마무리 및 최적화

**목표:** 완성도 향상 및 사용자 경험 최적화

- **3.3.1 통합 검색 기능 완성**

  - **CSV 기반 통합 검색 인덱스**: PokéAPI 없이 CSV 데이터만으로 완전한 검색 구현 ✅
    - 포켓몬: `pokemon.csv` + `pokemon_species_names.csv` (이름)
    - 기술: `moves.csv` + `move_names.csv` (이름)
    - 특성: `abilities.csv` + `ability_names.csv` (이름)
    - 도구: `items.csv` + `item_names.csv` (이름)
  - **단일 언어 검색 로직**: 한국어 기반 검색 ✅
    - 완전 일치 > 시작 부분 일치 > 포함 일치
  - **간단 검색 UI**: 자동완성 기능 제거, 안정적인 검색창 구현 ✅
  - **검색 결과 UI**: 탭별 분류, 하이라이팅, 비활성화 상태 표시 ✅

- **3.3.2 UI/UX 개선**

  - **검색 결과 레이아웃**: 하이라이팅 텍스트와 ID의 적절한 배치 ✅
  - **탭 비활성화**: 검색 결과가 없는 탭은 회색 표시 + 클릭 방지 ✅
  - **로딩/에러 상태**: Skeleton 컴포넌트와 친근한 에러 메시지 ✅
  - **모바일 최적화**: 터치 친화적 UI와 반응형 디자인 ✅

- **3.3.3 코드 경량화**

  - **불필요 기능 제거**: 사용하지 않는 상세 필터 UI 삭제 ✅
  - **중복 코드 정리**: 타입 안전성과 일관성 개선 ✅

   - **3.3.4 특성 상세페이지 한글화 개선**
    
    - **특성 이름 한글화**: ability_names.csv 활용 한국어 우선 표시 ✅
    - **효과 상세 한글화**: flavor_text_entries 최신 버전 한국어 텍스트 우선 표시 ✅
    - **포켓몬 이름 한글화**: pokemon_species_names.csv 활용 한국어 표시 ✅
    - **코드 문서화**: 각 기능 역할에 주석 추가 ✅
    - **특성 상세페이지 성능 최적화** (최근 완료) ✅
      - `fetchAbilityCached` 함수로 React.cache 적용, `generateMetadata`와 페이지 본문 간 중복 fetch 제거
      - `getPokemonDisplayName` 함수를 컴포넌트 외부로 이동하여 호이스팅 방지
      - `versionGroupRankMap`을 Record → Map으로 전환 (O(1) 조회)
      - `getLatestFlavorText` 함수로 로직 단순화, 최신 버전 선택 로직 개선
      - `handlePokemonClick` 함수로 분리하고 useCallback 적용, 인라인 핸들러 최적화
      - 사용하지 않는 `NamedAPIResource` 타입 import 제거

   - **3.3.5 성능 최적화 (Vercel React Best Practices 적용)**

   - **도감 상세페이지 스크롤 로직 훅 분리** (최근 완료) ✅
     - `src/app/dex/[id]/_hooks/useDetailScroll.ts` 생성하여 스크롤 관련 로직 분리
     - 컴포넌트 본문에서 useEffect 중복 제거 및 재사용성 확보

   - **정적 JSX 호이스팅** (최근 완료) ✅
     - `ArrowLeft` 아이콘을 `useMemo`로 감싸서 매 렌더링 재생성 방지

   - **불필요한 searchParams 구독 제거** (최근 완료) ✅
     - URL 파라미터 읽기를 콜백 내부 `getInitialTab` 함수로 분리
    - Defer State Reads 원칙 적용으로 불필요한 리렌더링 방지

  - **하드코딩된 language 제거** (최근 완료) ✅
    - `PokemonDetailClientProps` 인터페이스에 `language?: string` prop 추가
    - 기본값 `language = "ko"`으로 설정하여 prop 기반 사용

- **3.2.21 폴더 구조 일관성 및 성능 최적화 (최근 완료)**

  - **폴더 구조 일관성**: `items/[id]/ItemDetailClient.tsx` → `src/features/items/components/ItemDetailClient.tsx`로 이동 ✅
  - **라우트 상태 파일 추가**: `loading.tsx`, `error.tsx`, `not-found.tsx` 파일 추가 (items, moves 라우트) ✅
  - **items 상세 CSV 데이터 적용**: `items/[id]/page.tsx`에 `DexCsvDataProvider` 적용 ✅
  - **React.cache() 적용**: `itemsApi.server.ts`, `movesApi.server.ts`에 React.cache() 추가 ✅
  - **정적 JSX 호이스팅**: `ItemDetailClient.tsx`, `MoveDetailClient.tsx`에서 ArrowLeft 호이스팅 ✅
  - **server-only import 추가**: `movesApi.server.ts`에 `import "server-only"` 추가 ✅

- **3.3.5 성능 최적화 (Vercel React Best Practices 적용)**

  - **워터폴 제거**: `React.cache`를 활용한 서버 사이드 데이터 로딩 병렬화 ✅
    - `/dex/[id]` 페이지에서 `fetchPokemon`/`fetchPokemonSpecies`/`fetchEvolutionChain`/`fetchPokemonEncounters` 병렬 처리
    - `generateMetadata`와 페이지 본문 간 중복 fetch 제거
  - **컨텍스트 메모이제이션**: `PreferencesContext`/`QuizContext`에서 action 함수 `useCallback` 적용 ✅
    - 컨텍스트 소비 컴포넌트 불필요한 리렌더링 방지
  - **필터/검색 최적화**: O(n²) 반복 순회 → 맵 기반 O(1) 조회 전환 ✅
    - 도감 탭에서 타입/특성/포켓몬 ID 맵 사전 구축
    - 검색 결과에서 단일 루프 카테고리 분류
  - **렌더링 성능**: 검색 헤더 상태 동기화 간소화, 메모이제이션 적용 ✅
    - `SearchSummaryHeader`에서 불필요한 `useEffect` 제거
    - `useMemo` 의존성 최적화

---

### 5. 리스크 및 고려 사항

- **응답 구조/버전 그룹 복잡도**

  - 기술 습득 경로, 버전 그룹 필터링 로직 설계가 복잡 → 2단계에서 단계적으로 구현

---

### 6. 다음 단계

- 이 개발 계획서를 기준으로:
  - 1단계에 포함될 이슈를 세부 작업 단위로 쪼개어 TODO/이슈 트래킹에 등록
  - 폴더 구조(페이지/컴포넌트/쿼리/유틸/스토어) 설계
    - `src/app`, `src/components`, `src/components/ui`, `src/features`를 기본 축으로 사용한다.
    - 도메인/기능 및 페이지 단위로 `api/`, `hooks/`, `types/` 등의 하위 폴더를 두어,
      해당 단위에서 사용하는 API 호출, 커스텀 훅, 타입 정의를 **폴더 근처에 함께 배치**한다.
  - 이후 실제 코드 구현 시작
